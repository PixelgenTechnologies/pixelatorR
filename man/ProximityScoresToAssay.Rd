% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generics.R, R/pivot_tables.R
\docType{methods}
\name{ProximityScoresToAssay}
\alias{ProximityScoresToAssay}
\alias{ProximityScoresToAssay.tbl_lazy}
\alias{ProximityScoresToAssay.data.frame}
\alias{ProximityScoresToAssay.PNAAssay}
\alias{ProximityScoresToAssay.PNAAssay5}
\alias{ProximityScoresToAssay.Seurat}
\title{Convert proximity score table to an Assay or Assay5}
\usage{
ProximityScoresToAssay(object, ...)

\method{ProximityScoresToAssay}{tbl_lazy}(object, values_from = "join_count_z", ...)

\method{ProximityScoresToAssay}{data.frame}(
  object,
  values_from = "join_count_z",
  missing_obs = NA_real_,
  return_sparse = TRUE,
  ...
)

\method{ProximityScoresToAssay}{PNAAssay}(
  object,
  values_from = "join_count_z",
  missing_obs = NA_real_,
  ...
)

\method{ProximityScoresToAssay}{PNAAssay5}(
  object,
  values_from = "join_count_z",
  missing_obs = NA_real_,
  ...
)

\method{ProximityScoresToAssay}{Seurat}(
  object,
  assay = NULL,
  new_assay = NULL,
  values_from = "join_count_z",
  missing_obs = NA_real_,
  ...
)
}
\arguments{
\item{object}{An object with proximity scores}

\item{...}{Not yet implemented}

\item{values_from}{A single string defining what column in the proximity score table
to pick values from.}

\item{missing_obs}{A numeric value or NA to replace missing observations with. Default
is \code{NA_real_}.}

\item{return_sparse}{A logical specifying whether to return a sparse matrix (\code{dgCMatrix}).}

\item{assay}{Name of the \code{\link{PNAAssay}} or \code{\link{PNAAssay5}} to
pull proximity scores from}

\item{new_assay}{Name of the \code{\link{Assay}} or \code{\link{Assay5}} to
store the wide formatted spatial metric in}
}
\description{
Convert proximity score table to an Assay or Assay5
}
\section{Behavior}{


Takes an object with PNA proximity scores in long format and returns an
object with proximity scores in a wide format. The proximity score
table contains various spatial metrics along with p-values for each
protein pair and component.

The wide format is an array-like object with dimensions (markers_1 * marker_2) x components,
where each cell is filled with a value for a selected spatial metric.

Note that that observations that are missing from the proximity score table
can be replaced with 0's in the wide array by setting \code{missing_obs_val = 0},
which might be required by various functions in \code{Seurat}. However, this may
not be the desired behavior as a value of 0 usually doesn't mean that the observation
is missing.

Different outputs are returned depending on the input object type:

\itemize{
\item{
\code{tibble/data.frame}: returns a \code{matrix} with marker pairs in rows
and components in columns
}
\item{
\code{PNAAssay/PNAAssay5}: returns an \code{Assay} or \code{Assay5} with marker
pairs in rows and  components in columns
}
\item{
\code{Seurat} object: returns the \code{Seurat} object with a new \code{Assay}
or \code{Assay5} with marker pairs in rows and components in columns
}
}

As many methods provided in Seurat operates on \code{Assay}/\code{Assay5}
objects, it can sometimes be convenient to make this conversion if you
wish to use these methods on spatial metrics in the proximity score table.
For instance, if we want to compute a UMAP on the proximity scores with
\code{RunUMAP}, we need the values to be formatted in an \code{Assay}/\code{Assay5}.
This also makes it possible to use various visualization functions such as
\code{VlnPlot} or \code{FeaturePlot} to show the distribution of proximity scores.
}

\seealso{
Other Spatial metrics conversion methods: 
\code{\link{ColocalizationScoresToAssay}()},
\code{\link{PolarizationScoresToAssay}()}
}
\concept{Spatial metrics conversion methods}

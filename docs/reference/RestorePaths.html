<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Restore PXL file paths — RestorePaths • pixelatorR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Restore PXL file paths — RestorePaths"><meta name="description" content="Updates the PXL file paths in an object with the paths in the specified directory."><meta property="og:description" content="Updates the PXL file paths in an object with the paths in the specified directory."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pixelatorR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/load_data.html">Load Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PixelgenTechnologies/pixelatorR" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Restore PXL file paths</h1>

      <div class="d-none name"><code>RestorePaths.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Updates the PXL file paths in an object with the paths in the specified directory.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'MPXAssay'</span></span>
<span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">pxl_files_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'CellGraphAssay'</span></span>
<span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">pxl_files_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'CellGraphAssay5'</span></span>
<span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">pxl_files_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'PNAAssay'</span></span>
<span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">pxl_files_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'PNAAssay5'</span></span>
<span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">pxl_files_dir</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'Seurat'</span></span>
<span><span class="fu">RestorePaths</span><span class="op">(</span><span class="va">object</span>, <span class="va">pxl_files_dir</span>, assay <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments. Currently not used.</p></dd>


<dt id="arg-pxl-files-dir">pxl_files_dir<a class="anchor" aria-label="anchor" href="#arg-pxl-files-dir"></a></dt>
<dd><p>The directory where the PXL files are stored</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Print messages</p></dd>


<dt id="arg-assay">assay<a class="anchor" aria-label="anchor" href="#arg-assay"></a></dt>
<dd><p>Assay name</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object with updated PXL file paths</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Seurat objects created with <code>pixelatorR</code> store the MPX/PNA data
in a <code><a href="CellGraphAssay-class.html">CellGraphAssay</a></code>, <code><a href="CellGraphAssay5-class.html">CellGraphAssay5</a></code>, <code><a href="PNAAssay-class.html">PNAAssay</a></code>
or <code><a href="PNAAssay5-class.html">PNAAssay5</a></code> object. For some analytic tasks, such as component
visualization, you need to load the component graphs in memory with <code><a href="LoadCellGraphs.html">LoadCellGraphs</a></code>.</p>
<p><code><a href="LoadCellGraphs.html">LoadCellGraphs</a></code> reads data from the edgelist(s) stored in the PXL
files(s) that the Seurat object was created from (see <code><a href="ReadMPX_Seurat.html">ReadMPX_Seurat</a></code>
and <code><a href="ReadPNA_Seurat.html">ReadPNA_Seurat</a></code>). This means that the PXL files must be accessible
in the <code><a href="CellGraphAssay-class.html">CellGraphAssay</a></code>, <code><a href="CellGraphAssay5-class.html">CellGraphAssay5</a></code>, <code><a href="PNAAssay-class.html">PNAAssay</a></code>
or <code><a href="PNAAssay5-class.html">PNAAssay5</a></code> when you load the component graphs. You can check the PXL file paths
with <code><a href="FSMap.html">FSMap</a></code>.</p>
<p>If the PXL files are moved or copied to a different directory, <code><a href="LoadCellGraphs.html">LoadCellGraphs</a></code>
will fail because the PXL file paths are invalid. <code>RestorePaths</code> can
be useful in these situations to update the PXL file paths in the Seurat object.
All you need is to provide the path to the directory where the PXL files are located.</p>
    </div>
    <div class="section level2">
    <h2 id="exported-seurat-objects">Exported Seurat objects<a class="anchor" aria-label="anchor" href="#exported-seurat-objects"></a></h2>


<p>A typical situation when this function is useful is when you export a Seurat object
created with <code>pixelatorR</code> to an RDS file, and share it with someone else. To ensure
that all data is available for the recipient, you also need to share the raw PXL files
and make sure that the recipient updates the PXL file paths in the Seurat object with
<code>RestorePaths</code>.</p>
<p>For instance, let's assume that we have a Seurat object <code>seurat_obj</code> created with
<code>pixelatorR</code> and that the PXL files are stored in the directory <code>DATA_DIR</code>
on your local system. You can export the Seurat object to an RDS file with:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">seurat_obj</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">DATA_DIR</span>, <span class="st">"seurat_obj.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p>The content of DATA_DIR might look like this:</p><div class="sourceCode"><pre><code>
DATA_DIR
├── seurat_obj.rds
└── Sample01_pbmc.analysis.pxl
</code></pre></div><p>Now you can share the entire <code>DATA_DIR</code> folder with someone else. When the recipient
loads the RDS file in R, the PXL file paths in the Seurat object need to be updated,
because recipients <code>DATA_DIR</code> will be different from yours. Assuming that the recipient
has stored the PXL file and the RDS object in the directory <code>RECIPIENT_DATA_DIR</code>,
the recipient can update the PXL file paths with:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="va">seurat_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">RECIPIENT_DATA_DIR</span>, <span class="st">"seurat_obj.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">seurat_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RestorePaths.html">RestorePaths</a></span><span class="op">(</span><span class="va">seurat_obj</span>, pxl_files_dir <span class="op">=</span> <span class="va">RECIPIENT_DATA_DIR</span><span class="op">)</span></span></code></pre></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pixelatorR</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load example data as a Seurat object</span></span></span>
<span class="r-in"><span><span class="va">pxl_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="mpx_dataset.html">minimal_mpx_pxl_file</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Copy PXL file to tempdir</span></span></span>
<span class="r-in"><span><span class="va">tmp_pxl_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">path_temp</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"five_cells.pxl"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/copy.html" class="external-link">file_copy</a></span><span class="op">(</span><span class="va">pxl_file</span>, <span class="va">tmp_pxl_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">seur_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="ReadMPX_Seurat.html">ReadMPX_Seurat</a></span><span class="op">(</span><span class="va">tmp_pxl_file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Failed to remove temporary dir C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/dir1f2c61d37d59</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Failed to remove temporary dir C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/dir1f2c2fe82d87</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Failed to remove temporary file <a href="file://C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/file1f2c3fd56113.h5ad"><span style="color: #0000BB;">C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/file1f2c3fd56113.h5ad</span></a></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now we can load graphs</span></span></span>
<span class="r-in"><span><span class="va">seur_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="LoadCellGraphs.html">LoadCellGraphs</a></span><span class="op">(</span><span class="va">seur_obj</span>, cells <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">seur_obj</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Failed to delete temporary edge list parquet file <a href="file://C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/file1f2c46b8f2f.parquet"><span style="color: #0000BB;">C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/file1f2c46b8f2f.parquet</span></a>.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Failed to delete temporary edge list parquet file <a href="file://C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/file1f2c46b8f2f.parquet"><span style="color: #0000BB;">C:/Users/Max/AppData/Local/Temp/RtmpewNZPy/file1f2c46b8f2f.parquet</span></a>.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Removing or moving PXL file will make graphs inaccessible</span></span></span>
<span class="r-in"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/delete.html" class="external-link">file_delete</a></span><span class="op">(</span><span class="va">tmp_pxl_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># This will now fail since the PXL file is missing</span></span></span>
<span class="r-in"><span><span class="va">seur_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="LoadCellGraphs.html">LoadCellGraphs</a></span><span class="op">(</span><span class="va">seur_obj</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can restore paths to the PXL file using RestorePaths.</span></span></span>
<span class="r-in"><span><span class="co"># All we need is to provide the path to a directory where the PXL file is located.</span></span></span>
<span class="r-in"><span><span class="va">pxl_files_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/five_cells"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"pixelatorR"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">seur_obj</span> <span class="op">&lt;-</span> <span class="fu">RestorePaths</span><span class="op">(</span><span class="va">seur_obj</span>, pxl_files_dir <span class="op">=</span> <span class="va">pxl_files_dir</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now LoadCellGraphs should work as expected</span></span></span>
<span class="r-in"><span><span class="va">seur_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="LoadCellGraphs.html">LoadCellGraphs</a></span><span class="op">(</span><span class="va">seur_obj</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>© Pixelgen Technologies 2024 | <a href="https://www.pixelgen.com/cookie-policy/" class="external-link">About cookies</a> | <a href="https://www.pixelgen.com/privacy-policy/" class="external-link">Privacy policy</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


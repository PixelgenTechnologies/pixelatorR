<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Filter proximity scores — FilterProximityScores • pixelatorR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Filter proximity scores — FilterProximityScores"><meta name="description" content="At least one of the thresholds must be set. The function will filter out protein
pairs that do not meet the specified thresholds.
All filters can be used together or separately, but it's  recommended to only use
the background_threshold_pct filter. This filter is applied to the fraction
of UMI counts which does not depend on the cell size (total number of molecules).
The filters are applied in the following order:
Remove protein pairs with a minimum UMI count fraction below background_threshold_pct
Remove protein pairs with a minimum UMI count below background_threshold_count
Remove protein pairs detected in fewer than min_cells_count cells

"><meta property="og:description" content="At least one of the thresholds must be set. The function will filter out protein
pairs that do not meet the specified thresholds.
All filters can be used together or separately, but it's  recommended to only use
the background_threshold_pct filter. This filter is applied to the fraction
of UMI counts which does not depend on the cell size (total number of molecules).
The filters are applied in the following order:
Remove protein pairs with a minimum UMI count fraction below background_threshold_pct
Remove protein pairs with a minimum UMI count below background_threshold_count
Remove protein pairs detected in fewer than min_cells_count cells

"><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pixelatorR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/load_data.html">Load Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PixelgenTechnologies/pixelatorR" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Filter proximity scores</h1>

      <div class="d-none name"><code>FilterProximityScores.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>At least one of the thresholds must be set. The function will filter out protein
pairs that do not meet the specified thresholds.</p>
<p>All filters can be used together or separately, but it's  recommended to only use
the <code>background_threshold_pct</code> filter. This filter is applied to the fraction
of UMI counts which does not depend on the cell size (total number of molecules).</p>
<p>The filters are applied in the following order:</p><ol><li><p>Remove protein pairs with a minimum UMI count fraction below <code>background_threshold_pct</code></p></li>
<li><p>Remove protein pairs with a minimum UMI count below <code>background_threshold_count</code></p></li>
<li><p>Remove protein pairs detected in fewer than <code>min_cells_count</code> cells</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">FilterProximityScores</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'tbl_lazy'</span></span>
<span><span class="fu">FilterProximityScores</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  background_threshold_pct <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  background_threshold_count <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_cells_count <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"filtered_proximity"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">FilterProximityScores</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  background_threshold_pct <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  background_threshold_count <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_cells_count <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An <code>tbl_df</code> or <code>tbl_lazy</code> object with proximity scores.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments. Currently not used.</p></dd>


<dt id="arg-background-threshold-pct">background_threshold_pct<a class="anchor" aria-label="anchor" href="#arg-background-threshold-pct"></a></dt>
<dd><p>The background abundance level given as a fraction
total UMI counts. For example, 0.05 means that the background is set at 5% of the
total UMI counts for each cell. A protein pair must have at least this fraction
for both proteins to be kept in the table.</p></dd>


<dt id="arg-background-threshold-count">background_threshold_count<a class="anchor" aria-label="anchor" href="#arg-background-threshold-count"></a></dt>
<dd><p>The background abundance level given as a UMI count.
For example, 30 means that the background is set at 30 UMI counts. A protein pair
must have at least this UMI count for both proteins to be kept in the table. Note that
this puts a hard cutoff on the UMI counts, which may not be desired if the cells have
very different total UMI counts.</p></dd>


<dt id="arg-min-cells-count">min_cells_count<a class="anchor" aria-label="anchor" href="#arg-min-cells-count"></a></dt>
<dd><p>The minimum number of cells in which a protein pair must be
detected to be kept in the table. This is useful to remove protein pairs that are
detected in very few cells, which may be due to noise or low expression levels.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Name of the temporary table in the database containing the filtered proximity scores.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>tbl_df</code> or <code>tbl_lazy</code> with filtered proximity scores.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pixelatorR</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pxl_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="pna_dataset.html">minimal_pna_pxl_file</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">se</span> <span class="op">&lt;-</span> <span class="fu"><a href="ReadPNA_Seurat.html">ReadPNA_Seurat</a></span><span class="op">(</span><span class="va">pxl_file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created a <span style="color: #0000BB;">&lt;Seurat&gt;</span> object with <span style="color: #0000BB;">5</span> cells and <span style="color: #0000BB;">158</span> targeted surface proteins</span>
<span class="r-in"><span><span class="va">proximity_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="ProximityScores.html">ProximityScores</a></span><span class="op">(</span><span class="va">se</span>, add_marker_proportions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Setting `add_marker_counts = TRUE` which is required when `add_marker_proportions = TRUE`.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter scores</span></span></span>
<span class="r-in"><span><span class="va">proximity_table_filtered</span> <span class="op">&lt;-</span> <span class="fu">FilterProximityScores</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">proximity_table</span>,</span></span>
<span class="r-in"><span>  background_threshold_pct <span class="op">=</span> <span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Missing values are always removed in SQL aggregation functions.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Use `na.rm = TRUE` to silence this warning</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Rows kept</span></span></span>
<span class="r-in"><span><span class="va">pct_rows_kept</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">proximity_table_filtered</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">proximity_table</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"Fraction of rows kept: {pct_rows_kept}%"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fraction of rows kept: 11.13%</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>© Pixelgen Technologies 2024 | <a href="https://www.pixelgen.com/cookie-policy/" class="external-link">About cookies</a> | <a href="https://www.pixelgen.com/privacy-policy/" class="external-link">Privacy policy</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


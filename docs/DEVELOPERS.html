<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Package website (pkgdown) • pixelatorR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Package website (pkgdown)"><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">pixelatorR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="articles/load_data.html">Load Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PixelgenTechnologies/pixelatorR" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>Package website (pkgdown)</h1>

    </div>


<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a></h2>
<p>pixelatorR has more than 20 dependencies and depending on the system you are working on, some of these dependencies can create problems. For most systems, the easiest way to install pixelatorR is to set up a conda environment with the necessary dependencies and install it within that environment. In our GitHub repo, we provide some tasks which can be used to set up such an environment and install pixelatorR.</p>
<p>Below is a list of requirements to use these tasks:</p>
<ul><li><a href="https://mamba.readthedocs.io/en/latest/installation/micromamba-installation.html" class="external-link">micromamba</a></li>
<li><a href="https://taskfile.dev/installation/" class="external-link">task</a></li>
</ul><p>First you need to clone the repo and navigate to pixelatorR:</p>
<pre><code>git clone PixelgenTechnologies/pixelatorR
cd pixelatorR</code></pre>
<div class="section level3">
<h3 id="windows-linux-and-mac-on-intel">Windows, Linux and Mac on intel<a class="anchor" aria-label="anchor" href="#windows-linux-and-mac-on-intel"></a></h3>
<p>The following task can be used to setup a conda environment named <code>r-mpx</code> with pixelatorR installed:</p>
<pre><code>task setup-env-pixelatorR ENV_NAME=r-mpx</code></pre>
<p>The task will install all dependencies listed in the <code>environment.yml</code> file and then the pixelatorR package from GitHub.</p>
<p>Activate the environment with:</p>
<pre><code>micromamba activate r-mpx</code></pre>
</div>
<div class="section level3">
<h3 id="for-mac-os-on-arm">For Mac OS on ARM<a class="anchor" aria-label="anchor" href="#for-mac-os-on-arm"></a></h3>
<p>On machines with ARM processors (e.g. M1 or M2), the solution provided above will not work. The reason is that at the time of writing, conda-forge doesn’t provide all required pixelatorR dependencies for ARM processors.</p>
<p>Instead we can setup an empty environment with the following task:</p>
<pre><code>task setup-env-bare ENV_NAME=r-mpx</code></pre>
<p>Then we can install the dependencies using the <a href="https://pak.r-lib.org/" class="external-link">pak</a> instead. <code>pak</code> is a package manager for R that can install packages from CRAN, Bioconductor, GitHub, and other sources. It can also also fetch pre-built binaries from Posit Package Manager (PPM) if these are available. This is useful for systems where conda-forge doesn’t provide all required dependencies.</p>
<pre><code>micromamba activate r-mpx
task install-pixelatorR-with-pak</code></pre>
<p>Note that compared to the micromamba solution, pak is significantly slower.</p>
</div>
<div class="section level3">
<h3 id="rosetta-2">Rosetta 2<a class="anchor" aria-label="anchor" href="#rosetta-2"></a></h3>
<p>An alternative option is to use <a href="https://support.apple.com/en-us/102527" class="external-link">Rosetta 2</a> to emulate an intel processor. With this emulation, you can use the first solution and add and additional flag to the <code>micromamba</code> command:</p>
<pre><code>task setup-env-pixelatorR ENV_NAME=r-mpx MICROMAMBA_ARGS="--platform osx-64"</code></pre>
<p>Now micromamba should be able to install all dependencies as these are all available for intel processors.</p>
<p>This is not the recommended solution for ARM processors for two reasons:</p>
<ul><li>performance penalty : the emulation will slow down the execution of the code</li>
<li>arrow : if R is running R under emulation, arrow might segfault without error. See <a href="https://github.com/apache/arrow/pull/37777" class="external-link">this</a> issue on GitHub for more information. You can still use this configuration, but you will see a warnings message on package load when running under emulation on macOS (i.e., use of x86 installation of R on M1/aarch64).</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="package-dev-tasks">package dev tasks<a class="anchor" aria-label="anchor" href="#package-dev-tasks"></a></h2>
<p>Create <a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> documentation for the pacakge:</p>
<pre><code>task document</code></pre>
<hr><p>Run all package tests (<code><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">devtools::test()</a></code>):</p>
<pre><code>task test-all</code></pre>
<hr><p>Run all examples (<code><a href="https://devtools.r-lib.org/reference/run_examples.html" class="external-link">devtools::run_examples()</a></code>):</p>
<pre><code>task test-examples</code></pre>
<hr><p>Test staged R test scripts. This task will look for any test R scripts that are staged for commit and run these. The test scripts are located in the <code>tests/testthat</code> directory.</p>
<pre><code>task test-staged-files</code></pre>
<hr><p>Style staged R scripts using <a href="https://styler.r-lib.org/" class="external-link">styler</a>. This task will look for any R scripts that are staged for commit and style these based on the pixelatorR style guide.</p>
<pre><code>task style-staged-files</code></pre>
</div>
<div class="section level2">
<h2 id="linting">Linting<a class="anchor" aria-label="anchor" href="#linting"></a></h2>
<p>To run the linter, you need to install <code>lintr</code>. Then you can use one of the the following commands:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Lint entire pacakge</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint_package</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Lint single file</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint</a></span><span class="op">(</span><span class="st">"path/to/file.R"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can run the linter from RStudio through Addins -&gt; Lint current file or Addins -&gt; Lint current package.</p>
<p>The configuration file <code>.lintr</code> is used to specify the rules that the linter should follow. For compatibility with styler, some linting rules have been disabled.</p>
</div>
<div class="section level2">
<h2 id="styler">Styler<a class="anchor" aria-label="anchor" href="#styler"></a></h2>
<p>To style the code, you need to install <code>styler</code>. Then you can use one of the the following commands:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Style entire package</span></span>
<span><span class="fu">styler</span><span class="fu">::</span><span class="fu"><a href="https://styler.r-lib.org/reference/style_pkg.html" class="external-link">style_pkg</a></span><span class="op">(</span>transformers <span class="op">=</span> <span class="fu">pixelatorR</span><span class="fu">::</span><span class="fu"><a href="reference/pixelatorR_style.html">pixelatorR_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Style single file</span></span>
<span><span class="fu">styler</span><span class="fu">::</span><span class="fu"><a href="https://styler.r-lib.org/reference/style_file.html" class="external-link">style_file</a></span><span class="op">(</span><span class="st">"path/to/file.R"</span>, transformers <span class="op">=</span> <span class="fu">pixelatorR</span><span class="fu">::</span><span class="fu"><a href="reference/pixelatorR_style.html">pixelatorR_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can run the styler from RStudio. Here, you need to configure <code>styler</code> to use the style guide provided in pixelatorR. Go to Addins -&gt; Styler -&gt; Set style and set <code><a href="reference/pixelatorR_style.html">pixelatorR::pixelatorR_style()</a></code> as the style guide. Then you can use Addins -&gt; Styler -&gt; Style active file or Addins -&gt; Styler -&gt; Style active package.</p>
</div>
<div class="section level2">
<h2 id="type-assertions-and-error-messages">Type assertions and error messages<a class="anchor" aria-label="anchor" href="#type-assertions-and-error-messages"></a></h2>
<p><code>pixelatorR</code> provides a set of type assertions functions to check function arguments. See ?<code>type-checks</code> for a full list.</p>
<p>These functions are designed to cover the most common type checks that are needed in <code>pixelatorR</code> to ensure consistent error messages. They are also designed according to the tidyverse style guide (see <a href="https://style.tidyverse.org/errors.html" class="external-link">tidyverse style guide</a> and <a href="https://rlang.r-lib.org/reference/topic-error-call.html" class="external-link">Including function calls in error messages</a>).</p>
<div class="section level3">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a></h3>
<p>Assert that the input is a single character string:</p>
<pre><code><span><span class="va">my_var</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="reference/type_check_helpers.html">assert_single_value</a></span><span class="op">(</span><span class="va">my_var</span>, type <span class="op">=</span> <span class="st">"string"</span><span class="op">)</span></span></code></pre>
<p>Output:</p>
<pre><code>Error:
ℹ `my_var` must be a single string.
✖ You've supplied a &lt;numeric&gt;.</code></pre>
<p>Note that the error message includes the name of the variable, i.e. we don’t need to hard code the name in the error message.</p>
<p>Another useful feature is that the assertion function can pass the caller environment to the error message to signal where the error happened. This is useful when the assertion is used inside a function.</p>
<pre><code><span><span class="va">my_var</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">my_func</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="reference/type_check_helpers.html">assert_single_value</a></span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"string"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">my_func</span><span class="op">(</span><span class="va">my_var</span><span class="op">)</span></span></code></pre>
<p>Output:</p>
<pre><code>Error in `my_func()`:
ℹ `x` must be a single string.
✖ You've supplied a &lt;numeric&gt;.</code></pre>
</div>
<div class="section level3">
<h3 id="writing-error-messages">Writing error messages<a class="anchor" aria-label="anchor" href="#writing-error-messages"></a></h3>
<p>The assertion functions do not cover all possible type checks and are note necessarily useful for error messages that require more verbosity. If you need to write a custom error message, we suggest using <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_abort()</a></code>.</p>
<pre><code><span><span class="va">my_func</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/is.finite.html" class="external-link">is.finite</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli_abort</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"i"</span> <span class="op">=</span> <span class="st">"{.arg x} must be a finite number."</span>,</span>
<span>        <span class="st">"x"</span> <span class="op">=</span> <span class="st">"x = {.val {x}}"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">my_func</span><span class="op">(</span><span class="cn">Inf</span><span class="op">)</span></span></code></pre>
<p>Output:</p>
<pre><code>Error in `my_func()`:
ℹ `x` must be a finite number.
✖ x = Inf</code></pre>
</div>
</div>
<div id="package-website-pkgdown" class="section level1">

<p>The package website is built with <code>pkgdown</code> and contains an online reference for all classes, datasets and functions in the package. After a new release, the package website be updated.</p>
<ol style="list-style-type: decimal"><li>Check out the main branch and make sure the package is up to date.</li>
</ol><pre><code>git checkout main
git pull</code></pre>
<ol start="2" style="list-style-type: decimal"><li>Check out the <code>gh-pages</code> branch and merge the main branch into it.</li>
</ol><pre><code>git checkout gh-pages
git merge main</code></pre>
<ol start="3" style="list-style-type: decimal"><li><p>Update the <code>_pkgdown.yml</code> file to include new content. The most important thing is to update the <code>reference</code> section with new function, classes etc. All exported features needs to be documented here, otherwise you cannot build the website.</p></li>
<li><p>Update the website.</p></li>
</ol><p>From R:</p>
<pre><code><span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<ol start="5" style="list-style-type: decimal"><li>Commit the changes to the <code>gh-pages</code> branch and push to GitHub.</li>
</ol></div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>© Pixelgen Technologies 2024 | <a href="https://www.pixelgen.com/cookie-policy/" class="external-link">About cookies</a> | <a href="https://www.pixelgen.com/privacy-policy/" class="external-link">Privacy policy</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

